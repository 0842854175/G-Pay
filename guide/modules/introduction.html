<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Introduction | Vue Storefront</title>
    <meta name="description" content="Headless PWA for eCommerce">
    <link rel="icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.ca5bf9f5.css" as="style"><link rel="preload" href="/assets/js/app.d8ba6bec.js" as="script"><link rel="preload" href="/assets/js/60.4a3fb3d3.js" as="script"><link rel="prefetch" href="/assets/js/10.aad38706.js"><link rel="prefetch" href="/assets/js/11.dbf0cd2d.js"><link rel="prefetch" href="/assets/js/12.8ab12175.js"><link rel="prefetch" href="/assets/js/13.7cddb3f7.js"><link rel="prefetch" href="/assets/js/14.1eec77ed.js"><link rel="prefetch" href="/assets/js/15.79b481f7.js"><link rel="prefetch" href="/assets/js/16.d5958d47.js"><link rel="prefetch" href="/assets/js/17.dad6938c.js"><link rel="prefetch" href="/assets/js/18.16b574f2.js"><link rel="prefetch" href="/assets/js/19.98bf533f.js"><link rel="prefetch" href="/assets/js/2.e420855b.js"><link rel="prefetch" href="/assets/js/20.3befc43a.js"><link rel="prefetch" href="/assets/js/21.5f76b73a.js"><link rel="prefetch" href="/assets/js/22.6ba6e9de.js"><link rel="prefetch" href="/assets/js/23.36cd1220.js"><link rel="prefetch" href="/assets/js/24.bb44e3f8.js"><link rel="prefetch" href="/assets/js/25.ed5e1c93.js"><link rel="prefetch" href="/assets/js/26.c6ce7dd6.js"><link rel="prefetch" href="/assets/js/27.b96d4e19.js"><link rel="prefetch" href="/assets/js/28.1069fe0a.js"><link rel="prefetch" href="/assets/js/29.8c6ca725.js"><link rel="prefetch" href="/assets/js/3.2995eee1.js"><link rel="prefetch" href="/assets/js/30.66e5e0e6.js"><link rel="prefetch" href="/assets/js/31.a5ed2179.js"><link rel="prefetch" href="/assets/js/32.80eacb41.js"><link rel="prefetch" href="/assets/js/33.096aa449.js"><link rel="prefetch" href="/assets/js/34.deb2389a.js"><link rel="prefetch" href="/assets/js/35.5224db0c.js"><link rel="prefetch" href="/assets/js/36.6777a517.js"><link rel="prefetch" href="/assets/js/37.cceecf56.js"><link rel="prefetch" href="/assets/js/38.727d4ca1.js"><link rel="prefetch" href="/assets/js/39.06021a50.js"><link rel="prefetch" href="/assets/js/4.56d2cd4c.js"><link rel="prefetch" href="/assets/js/40.a6db0c7d.js"><link rel="prefetch" href="/assets/js/41.1e93c319.js"><link rel="prefetch" href="/assets/js/42.d7408646.js"><link rel="prefetch" href="/assets/js/43.714cb975.js"><link rel="prefetch" href="/assets/js/44.38aad24b.js"><link rel="prefetch" href="/assets/js/45.2aa6fae9.js"><link rel="prefetch" href="/assets/js/46.ae82a2b4.js"><link rel="prefetch" href="/assets/js/47.4320ee7b.js"><link rel="prefetch" href="/assets/js/48.1f5cc9bd.js"><link rel="prefetch" href="/assets/js/49.d9d92b0f.js"><link rel="prefetch" href="/assets/js/5.468e6e0c.js"><link rel="prefetch" href="/assets/js/50.590c72f3.js"><link rel="prefetch" href="/assets/js/51.84d23438.js"><link rel="prefetch" href="/assets/js/52.46d9a3ae.js"><link rel="prefetch" href="/assets/js/53.2decf3d6.js"><link rel="prefetch" href="/assets/js/54.d6cbd4a4.js"><link rel="prefetch" href="/assets/js/55.3c6ece4b.js"><link rel="prefetch" href="/assets/js/56.74ddfd82.js"><link rel="prefetch" href="/assets/js/57.1401c4b7.js"><link rel="prefetch" href="/assets/js/58.c9baf31f.js"><link rel="prefetch" href="/assets/js/59.aa39857f.js"><link rel="prefetch" href="/assets/js/6.9e714a77.js"><link rel="prefetch" href="/assets/js/61.78de2281.js"><link rel="prefetch" href="/assets/js/62.abade39a.js"><link rel="prefetch" href="/assets/js/63.3f0ec155.js"><link rel="prefetch" href="/assets/js/64.e9046dd4.js"><link rel="prefetch" href="/assets/js/65.439a44e2.js"><link rel="prefetch" href="/assets/js/66.b8c911b7.js"><link rel="prefetch" href="/assets/js/67.c8004826.js"><link rel="prefetch" href="/assets/js/68.692e58e3.js"><link rel="prefetch" href="/assets/js/69.49751176.js"><link rel="prefetch" href="/assets/js/7.f63a084c.js"><link rel="prefetch" href="/assets/js/70.405beee7.js"><link rel="prefetch" href="/assets/js/8.29152829.js"><link rel="prefetch" href="/assets/js/9.af22b943.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ca5bf9f5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Vue Storefront</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.youtube.com/channel/UCkm1F3Cglty3CE1QwKQUhhg" target="_blank" rel="noopener noreferrer" class="nav-link external">
  YouTube
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://medium.com/the-vue-storefront-journal" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Medium
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/DivanteLtd/vue-storefront" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://www.youtube.com/channel/UCkm1F3Cglty3CE1QwKQUhhg" target="_blank" rel="noopener noreferrer" class="nav-link external">
  YouTube
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://medium.com/the-vue-storefront-journal" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Medium
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/DivanteLtd/vue-storefront" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/guide/" class="sidebar-link">Introduction to Vue Storefront</a></li><li><a href="/guide/upgrade-notes/" class="sidebar-link">Upgrade notes</a></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Installation</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/installation/linux-mac.html" class="sidebar-link">Installing on Linux/MacOS</a></li><li><a href="/guide/installation/windows.html" class="sidebar-link">Installing on Windows</a></li><li><a href="/guide/installation/magento.html" class="sidebar-link">Integration with Magento 2</a></li><li><a href="/guide/installation/production-setup.html" class="sidebar-link">Production setup</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Basics</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/basics/release-cycle.html" class="sidebar-link">Release Cycle</a></li><li><a href="/guide/basics/project-structure.html" class="sidebar-link">Project structure</a></li><li><a href="/guide/basics/configuration.html" class="sidebar-link">Configuration file explained</a></li><li><a href="/guide/basics/contributing.html" class="sidebar-link">How to Contribute</a></li><li><a href="/guide/basics/feature-list.html" class="sidebar-link">Feature list</a></li><li><a href="/guide/basics/recipes.html" class="sidebar-link">FAQ and Recipes</a></li><li><a href="/guide/basics/typescript.html" class="sidebar-link">TypeScript Action Plan</a></li><li><a href="/guide/basics/graphql.html" class="sidebar-link">GraphQL Action Plan</a></li><li><a href="/guide/basics/ssr-cache.html" class="sidebar-link">SSR Cache</a></li><li><a href="/guide/basics/amp.html" class="sidebar-link">Google Accelerated Mobile Pages</a></li><li><a href="/guide/basics/e2e.html" class="sidebar-link">E2E tests</a></li><li><a href="/guide/basics/url.html" class="sidebar-link">Custom URL structure</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Core and themes</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/core-themes/themes.html" class="sidebar-link">Themes in Vue Storefront</a></li><li><a href="/guide/core-themes/layouts.html" class="sidebar-link">Layouts and advanced output operations</a></li><li><a href="/guide/core-themes/core-components.html" class="sidebar-link">Working with core components</a></li><li><a href="/guide/core-themes/ui-store.html" class="sidebar-link">Working with UI Store (Interface state)</a></li><li><a href="/guide/core-themes/translations.html" class="sidebar-link">Internationalization (i18n) of Vue Storefront</a></li><li><a href="/guide/core-themes/service-workers.html" class="sidebar-link">Working with Service Workers</a></li><li><a href="/guide/core-themes/webpack.html" class="sidebar-link">Working with Webpack</a></li><li><a href="/guide/core-themes/plugins.html" class="sidebar-link">Working with plugins</a></li><li><a href="/guide/core-themes/stylesheets.html" class="sidebar-link">Working with stylesheets in the 'default' theme</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Components</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/components/home-page.html" class="sidebar-link">Core Home Page</a></li><li><a href="/guide/components/category-page.html" class="sidebar-link">Core Category Page</a></li><li><a href="/guide/components/product.html" class="sidebar-link">Core Product Page</a></li><li><a href="/guide/components/modal.html" class="sidebar-link">Modal component</a></li><li><a href="/guide/components/events-list.html" class="sidebar-link">Events List</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Data in Vue Storefront</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/data/data.html" class="sidebar-link">Working with data</a></li><li><a href="/guide/data/elasticsearch.html" class="sidebar-link">ElasticSearch data formats</a></li><li><a href="/guide/data/data-migrations.html" class="sidebar-link">Data Migrations for ElacticSearch</a></li><li><a href="/guide/data/elastic-queries.html" class="sidebar-link">ElasticSearch Queries</a></li><li><a href="/guide/data/database-tool.html" class="sidebar-link">Database tool</a></li><li><a href="/guide/data/entity-types.html" class="sidebar-link">Data Entity Types</a></li><li><a href="/guide/data/static-data.html" class="sidebar-link">Static Data support in Vue Storefront</a></li><li><a href="/guide/data/data-loader.html" class="sidebar-link">Async Data Loader</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Extensions</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/extensions/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/guide/extensions/extending-api.html" class="sidebar-link">Extending the API</a></li><li><a href="/guide/extensions/extending-server-side-routes.html" class="sidebar-link">Extending Express.js server side routes</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Working with Vuex</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/vuex/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/guide/vuex/vuex-conventions.html" class="sidebar-link">Vuex conventions</a></li><li><a href="/guide/vuex/product-store.html" class="sidebar-link">Product Vuex Store</a></li><li><a href="/guide/vuex/category-store.html" class="sidebar-link">Category Vuex Store</a></li><li><a href="/guide/vuex/stock-store.html" class="sidebar-link">Stock Vuex Store</a></li><li><a href="/guide/vuex/attribute-store.html" class="sidebar-link">Attribute Vuex Store</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Modules</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/modules/introduction.html" class="active sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/modules/introduction.html#what-is-the-purpose-of-vs-modules" class="sidebar-link">What is the purpose of VS modules?</a></li><li class="sidebar-sub-header"><a href="/guide/modules/introduction.html#module-config-and-capabilities" class="sidebar-link">Module config and capabilities</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/modules/introduction.html#key-required" class="sidebar-link">key (required)</a></li><li class="sidebar-sub-header"><a href="/guide/modules/introduction.html#store" class="sidebar-link">store</a></li><li class="sidebar-sub-header"><a href="/guide/modules/introduction.html#router" class="sidebar-link">router</a></li><li class="sidebar-sub-header"><a href="/guide/modules/introduction.html#beforeregistration" class="sidebar-link">beforeRegistration</a></li><li class="sidebar-sub-header"><a href="/guide/modules/introduction.html#afterregistration" class="sidebar-link">afterRegistration</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/modules/introduction.html#module-file-structure" class="sidebar-link">Module file structure</a></li><li class="sidebar-sub-header"><a href="/guide/modules/introduction.html#module-registration" class="sidebar-link">Module registration</a></li><li class="sidebar-sub-header"><a href="/guide/modules/introduction.html#general-rules-and-good-practices" class="sidebar-link">General rules and good practices</a></li><li class="sidebar-sub-header"><a href="/guide/modules/introduction.html#adding-new-features-as-vs-modules" class="sidebar-link">Adding new features as VS modules</a></li><li class="sidebar-sub-header"><a href="/guide/modules/introduction.html#extending-and-overriding-vue-storefront-modules" class="sidebar-link">Extending and overriding Vue Storefront Modules</a></li><li class="sidebar-sub-header"><a href="/guide/modules/introduction.html#creating-third-party-modules" class="sidebar-link">Creating third party modules</a></li><li class="sidebar-sub-header"><a href="/guide/modules/introduction.html#contributions" class="sidebar-link">Contributions</a></li></ul></li><li><a href="/guide/modules/cart.html" class="sidebar-link">Cart module</a></li><li><a href="/guide/modules/user.html" class="sidebar-link">User Module</a></li><li><a href="/guide/modules/checkout.html" class="sidebar-link">Checkout Module</a></li><li><a href="/guide/modules/order.html" class="sidebar-link">Order module</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Integrations</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/integrations/integrations.html" class="sidebar-link">Existing integrations</a></li><li><a href="/guide/integrations/reviews.html" class="sidebar-link">Product Reviews</a></li><li><a href="/guide/integrations/payment-gateway.html" class="sidebar-link">Payment Gateway Integration</a></li><li><a href="/guide/integrations/paypal-payments.html" class="sidebar-link">PayPal payments support</a></li><li><a href="/guide/integrations/direct-prices-sync.html" class="sidebar-link">Direct prices sync with Magento</a></li><li><a href="/guide/integrations/tier-prices-sync.html" class="sidebar-link">Tier prices sync with Magento</a></li><li><a href="/guide/integrations/totals-sync.html" class="sidebar-link">Totals and cart sync with Magento</a></li><li><a href="/guide/integrations/multistore.html" class="sidebar-link">Multistore Magento2 support</a></li><li><a href="/guide/integrations/product-reviews.html" class="sidebar-link">Product Reviews</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="introduction"><a href="#introduction" aria-hidden="true" class="header-anchor">#</a> Introduction</h1> <h1 id="table-of-contents"><a href="#table-of-contents" aria-hidden="true" class="header-anchor">#</a> Table of contents</h1> <p><strong>Introduction and motivation</strong></p> <ul><li><a href="#what-are-vs-modules">What are VS Modules</a></li> <li><a href="#motivation">Motivation</a></li> <li><a href="#what-is-the-purpose-of-vs-modules">What is the purpose of VS modules?</a></li></ul> <p><strong>Technical part</strong></p> <ul><li><a href="#module-config-and-capabilities">Module config and it's capabilities</a></li> <li><a href="#module-file-structure">Module file structure</a></li> <li><a href="#module-registration">Module registration</a></li></ul> <p><strong>Patterns and good practices for common use cases</strong></p> <ul><li><a href="#general-rules-and-good-practices">General rules and good practices</a></li> <li><a href="#adding-new-features-as-vs-modules">Adding new features as VS modules</a></li> <li><a href="#extending-and-overriding-vue-storefront-modules">Extending and overriding Vue Storefront modules</a></li> <li><a href="#Creating-3rd-party-modules">Creating third party modules</a></li></ul> <h1 id="what-are-vs-modules"><a href="#what-are-vs-modules" aria-hidden="true" class="header-anchor">#</a> What are VS modules?</h1> <p>You can think about each module as a one, independent feature available in Vue Storefront with all it's logic and dependencys inside. This 'one feature' however is a common denominator that links all the features inside. For example common denominator for adding product to the cart, receiving list of items that are in a cart or applying a cart coupon is obviously a <code>cart</code> and <code>cart</code> is not a feature of anything bigger than itself (it's common denominator is a shop) so it should be a module. Wishlist, Reviews or Newsletter are also a good examples of modules as we intuitively think about them as a standalone features.</p> <h1 id="motivation"><a href="#motivation" aria-hidden="true" class="header-anchor">#</a> Motivation</h1> <p>I believe that some neat metaphore can clearly describe the problem as well as a solution.</p> <p>To better illustrate the whole concept I'll try to explain it with lego bricks.</p> <p>Let's say we have a box with 90 lego bricks that we can use to build some fancy things like Towers, Castles, or Helicopters. Unfortunately due to some stupid EU regulations we can only have 3 different colors of bricks in our box. As we all know not every color is accurate for every structure that can be built so we need to swap one color with a different one from the shop from time to time to have bricks in colors that are best-suited for our next lego project.</p> <p>Cool, but there is one problem - since we have all our bricks in one box they look more or less like this:</p> <img src="http://www.robomiku.ee/wp-content/uploads/2016/10/9027.png" style="width: 150px;"> <p>When we want to replace the green bricks with, let's say, the black ones we need to look for each green brick separately among all the others which can take a lot of time... and there is still a chance that we will miss some of them! Not to mention that finding the particular green brick that we need to finish the palm tree we are building (<a href="https://www.thedailybrick.co.uk/media/catalog/product/cache/1/image/700x700/9df78eab33525d08d6e5fb8d27136e95/l/e/lego_small_palm_leaf_8_x_3__6148__lego-green-small-palm-leaf-8-x-3-6148-30-257873-61.jpg" target="_blank" rel="noopener noreferrer">this one!<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>) will require looking for it among all the other bricks which can make this task extremely difficult and time-consuming.</p> <p>This is obviously not a situation that we want to end up in with our small lego empire. Neither we want it with Vue Storefront since it's meant to be easly extendable so you can replace your green bricks (or current user cart feature/cms provider/cms content provider) with the black ones (different cart feature with multiple carts, wordpress instead of prismic for content etc) without looking for each of them among all the bricks and without worrying that you will miss some of them and EU will confiscate all the bricks that you have! We also want to make it easier to find the exact brick that we want right now to finish this damn palm tree!</p> <p>So how we make this horrible situation better?</p> <p>Introducing... (drums in the background) <strong><em>bricks grouped by colors</em></strong>! (wows in the background)</p> <img src="https://sh-s7-live-s.legocdn.com/is/image/LEGO/6177?$PDPDefault$" style="width: 150px;"> <p>When we have our bricks grouped by their colors (and in a separate boxes - modules) it's much easier to find this green brick that we needed for a palm tree since we only need to search in a small subset of all bricks. Moreover when we want to replace green bricks with the black ones then instead of looking for all the grren represenattives one by one we are just replacing their box with the one containing black bricks. We also don't need to worry that something was left since we know that all the green bricks were in the box.</p> <p>This is the kind of modularity and extendibility we want in Vue Storefront and architecture we are currently rewriting it into.</p> <h2 id="what-is-the-purpose-of-vs-modules"><a href="#what-is-the-purpose-of-vs-modules" aria-hidden="true" class="header-anchor">#</a> What is the purpose of VS modules?</h2> <p>The purpose is well described in <a href="https://github.com/DivanteLtd/vue-storefront/issues/1213" target="_blank" rel="noopener noreferrer">this discussion<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. It can be sumamrized to:</p> <ul><li><strong>Better extensibility</strong>: We can extend each module or replace it completely with the new one. For example we may want to replace our Cart module with the one that allows to have multiple carts. With modules we can just detach current Cart module and repalce it with our new one. Another example can be using different modules for different content CMSes integration etc.</li> <li><strong>Better developer experience</strong>: Along with the modules we are introducing many features focused on delivering better, easier to jump in and more predictable developer experience. We changed the way you can compose components with features, added unit tests, TypeScript interfaces etc.</li> <li><strong>Better upgradability</strong>: Each module is a separate NPM package therefore can be upgraded independently and since it have all the logic encapsulated it shouldn't break any other parts of the application when detached, modified or replaced.</li></ul> <h2 id="module-config-and-capabilities"><a href="#module-config-and-capabilities" aria-hidden="true" class="header-anchor">#</a> Module config and capabilities</h2> <p>Module config is the object that is required to instantiate VS module. The config object you'll provide is later used to extend and hook into different parts of the application (like router, Vuex etc).
Please use this object as the only part that is responsible for extending Vue Storefront. Otherwise it may stop working after some breaking core updates.</p> <p>Vue Storefront module object with provided config should be exported in <code>index.ts</code> entry point. Ideally it should be a named export named the same as modules key.</p> <p>This is how the signature of Vue Storefront Module looks like:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">VueStorefrontModuleConfig</span> <span class="token punctuation">{</span>
  key<span class="token punctuation">:</span> string<span class="token punctuation">;</span>
  store<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    modules<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> key<span class="token punctuation">:</span> string<span class="token punctuation">,</span> module<span class="token punctuation">:</span> Module<span class="token operator">&lt;</span>any<span class="token punctuation">,</span> any<span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    plugin<span class="token operator">?</span><span class="token punctuation">:</span> Function<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  router<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    routes<span class="token operator">?</span><span class="token punctuation">:</span> RouteConfig<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    beforeEach<span class="token operator">?</span><span class="token punctuation">:</span> NavigationGuard<span class="token punctuation">,</span>
    afterEach<span class="token operator">?</span><span class="token punctuation">:</span> NavigationGuard<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  beforeRegistration<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token constant">VSF</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  afterRegistration<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token constant">VSF</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>See code <a href="https://github.com/DivanteLtd/vue-storefront/blob/develop/core/modules/index.ts" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="key-required"><a href="#key-required" aria-hidden="true" class="header-anchor">#</a> <code>key</code> (required)</h3> <p>Key is an ID of your module. It's used to identify your module and to set keys in all key-based extendings that module is doing (like creating namespaced store). This key should be unique.</p> <h3 id="store"><a href="#store" aria-hidden="true" class="header-anchor">#</a> <code>store</code></h3> <p>Entry point for Vuex.</p> <ul><li><code>modules</code> - array of Vuyex modules to register under given keys</li> <li><code>plugin</code> - you can provide your own Vuex plugin here</li></ul> <h3 id="router"><a href="#router" aria-hidden="true" class="header-anchor">#</a> <code>router</code></h3> <p>Entry point for vue-router. You can provide additional routes and <a href="https://router.vuejs.org/guide/advanced/navigation-guards.html" target="_blank" rel="noopener noreferrer">navigation guards<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> here.</p> <h3 id="beforeregistration"><a href="#beforeregistration" aria-hidden="true" class="header-anchor">#</a> <code>beforeRegistration</code></h3> <p>Function that'll be called before registering the module both on server and client side. You have access to VSF object here.</p> <p>The <code>VSF</code> object is an instance of your Vue Storefront shop. It contains following properties</p> <div class="language-js extra-class"><pre class="language-js"><code>    Vue<span class="token operator">?</span><span class="token punctuation">:</span> VueConstructor<span class="token punctuation">,</span>
    config<span class="token operator">?</span><span class="token punctuation">:</span> Object<span class="token punctuation">,</span>
    store<span class="token operator">?</span><span class="token punctuation">:</span> Store<span class="token operator">&lt;</span>RootState<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    isServer<span class="token operator">?</span><span class="token punctuation">:</span> boolean
</code></pre></div><h3 id="afterregistration"><a href="#afterregistration" aria-hidden="true" class="header-anchor">#</a> <code>afterRegistration</code></h3> <p>Function that'll be called after registering the module both on server and client side. You have access to VSF object here.</p> <p>The <code>VSF</code> object is an instance of your Vue Storefront shop. It contains following properties</p> <div class="language-js extra-class"><pre class="language-js"><code>    Vue<span class="token operator">?</span><span class="token punctuation">:</span> VueConstructor<span class="token punctuation">,</span>
    config<span class="token operator">?</span><span class="token punctuation">:</span> Object<span class="token punctuation">,</span>
    store<span class="token operator">?</span><span class="token punctuation">:</span> Store<span class="token operator">&lt;</span>RootState<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    isServer<span class="token operator">?</span><span class="token punctuation">:</span> boolean
</code></pre></div><h2 id="module-file-structure"><a href="#module-file-structure" aria-hidden="true" class="header-anchor">#</a> Module file structure</h2> <p>Below you can see recommended file structure for VS module. All of the core ones are organised in this way.
Try to have similar file structure inside the ones that you create. If all of modules will implement similar architeture it'll be easier to maintain and understand them. If there is no purpose in organising some of it's parts differently try to avoid it.</p> <p>Not all of this folders and files needs to be in every module. The only mandatory file is <code>index.ts</code> which is the entry point. The rest depends on your needs and module functionality.</p> <p>You can take a look at <a href="https://github.com/DivanteLtd/vue-storefront/tree/master/core/modules/module-template" target="_blank" rel="noopener noreferrer">module template<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> with example implementation of all features listed in config.</p> <ul><li><code>components</code> - Components logic related to this module (eg. Microcart for Cart module). Normally it contains <code>.ts</code> files but you can also create <code>.vue</code> files and provide some baseline markup if it is required for the compoennt to work out of the box.</li> <li><code>pages</code> - If you want to provide full pages with your module palce them here. It's also a good practice to extend router configuration for this pages</li> <li><code>store</code> - Vuex Module associated to this module. You can also place Vuex modules extensions in here
<ul><li><code>index.ts</code> - Entry point and main export of your Vuex Module. Actions/getters/mutations can be splitted into different files if logic is too complex to keep it in one file. Should be used in <code>store</code> config property.</li> <li><code>mutation-types.ts</code> - Mutation strings represented by variables to use instead of plain strings</li> <li><code>plugins.ts</code> - Good place to put vuex plugin. Should be used in <code>store.plugins</code> config object</li></ul></li> <li><code>types</code> - TypeScript types associated with module</li> <li><code>test</code> - Folder with unit tests which is <em>required</em> for every new or rewritten module.</li> <li><code>hooks</code> - before/after hooks that are called before and after registration of module.
<ul><li><code>beforeRegistration.ts</code> - Should be used in <code>beforeRegistration</code> config property.</li> <li><code>afterRegistration.ts</code> - Should be used in <code>afterRegistration</code> config property.</li></ul></li> <li><code>router</code> - routes and navigation guards associated to this module
<ul><li><code>routes.ts</code>- array of route objects that will be added to current router configuration. Should be used in <code>router.routes</code> config property.</li> <li><code>beforeEach.ts</code> - beforEeach navigation guard. Should be used in <code>router.beforeEach</code> config property.</li> <li><code>afterEach.ts</code>- afterEach navigation guard. Should be used in <code>router.afterEach</code> config property.</li></ul></li> <li><code>queries</code> - GraphQL queries</li> <li><code>helpers</code> - everything else that is meant to support modules behavior</li> <li><code>index.js</code> - entry point for the module. Should export VueStorefrontModule. It's also a good place to instantiate cache storage.</li></ul> <h2 id="module-registration"><a href="#module-registration" aria-hidden="true" class="header-anchor">#</a> Module registration</h2> <p>All modules including the core ones are registered in <code>theme/modules/index.ts</code> file. Thanks to this approach you can easly modify any of core modules object before registration (read more <a href="#extending-and-overriding-vue-storefront-modules">here</a>).</p> <p>All VS modules from <code>registerModules</code> will be registered during shop initialisation.</p> <hr> <h2 id="general-rules-and-good-practices"><a href="#general-rules-and-good-practices" aria-hidden="true" class="header-anchor">#</a> General rules and good practices</h2> <p>First take a look at module template. It cointains great examples, good practices and explainations for everything that can be putted in module.</p> <ol start="0"><li><strong>MOST IMPORTANT RULE</strong> Try to encapsulate all the logic required for module to work inside the module. You can import it in other parts of the app but the logic itself should be in a module</li> <li><strong>Try not to rely on any other modules. Keep everuything encapsualted and only rely on core helpers and libs</strong>. Use other stores only if it's the only way to achieve some functionality and import <code>rootStore</code> for this purposes. Modules should be standalone and rely only on themeselves. Try to think about each module as a standalone npm package.</li> <li>Place all reusable features as a Vuex actions (e.g. <code>addToCart(product)</code>, <code>subscribeNewsletter()</code> etc) instead of placing them in components. try to use getters for modified or filtered values from state. We are trying to place most of the logic in Vuex stores to allow easier core updates. Here is a good example of such externalisation.</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> Microcart <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Microcart'</span><span class="token punctuation">,</span>
  computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">productsInCart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Product<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>cart<span class="token punctuation">.</span>cartItems<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">appliedCoupon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> AppliedCoupon <span class="token operator">|</span> <span class="token boolean">false</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">[</span><span class="token string">'cart/coupon'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">totals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> CartTotalSegments <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">[</span><span class="token string">'cart/totals'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">isMicrocartOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> boolean <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>microcart<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">applyCoupon</span><span class="token punctuation">(</span>code<span class="token punctuation">:</span> String<span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'cart/applyCoupon'</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">removeCoupon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'cart/removeCoupon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">toggleMicrocart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'ui/toggleMicrocart'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>If you want to inform about success/failure of core component's method you can eaither use a callback or scoped event. Omit Promises if you thing that function can be called from the template and you'll need the resolved value. This is a good example of method that you can call either on <code>template</code> ot <code>script</code> section:</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">addToCart</span><span class="token punctuation">(</span>product<span class="token punctuation">,</span> success<span class="token punctuation">,</span> failure<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'cart/addToCart'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span>
    <span class="token function">success</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span>
    <span class="token function">failure</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Try to choose method basing on use case. <a href="https://github.com/DivanteLtd/vue-storefront/blob/develop/core/modules/mailchimp/components/Subscribe.ts#L28" target="_blank" rel="noopener noreferrer">This<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a good example of using callbacks.</p> <ol start="5"><li>Create pure functions that can be easly called with different argument. Rely on <code>data</code> properties instead of arguments only if it's required (for example they are validated like <a href="https://github.com/DivanteLtd/vue-storefront/blob/develop/core/modules/mailchimp/components/Subscribe.ts#L28" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li>Document exported components like in example: https://github.com/DivanteLtd/vue-storefront/blob/develop/core/modules/mailchimp/components/Subscribe.ts</li> <li>If your module core functionality is an integration with external service better name it the same as this service (for example <code>mailchimp</code>)</li> <li>Use named exports and typecheck.</li></ol> <h2 id="adding-new-features-as-vs-modules"><a href="#adding-new-features-as-vs-modules" aria-hidden="true" class="header-anchor">#</a> Adding new features as VS modules</h2> <ul><li>If you want to crete a new module copy content from <code>src/module-template</code> and use the parts that you need.</li> <li>If you are creating a new feature first think if it's not just extending currently existing one . If you are sure that feature you want to provide is completely new then it should be introduced as new VS module.</li> <li>Provide unique key that should represent the feature or 3rd party system name (if the module is an integration)</li> <li>Try not to rely on data and logic from other modules if your module is not directly extending it. It'll be more reusable and remain working even after extensive VS core updates.</li></ul> <h2 id="extending-and-overriding-vue-storefront-modules"><a href="#extending-and-overriding-vue-storefront-modules" aria-hidden="true" class="header-anchor">#</a> Extending and overriding Vue Storefront Modules</h2> <p>You can extend and modify all parts of any of Vue Storefront modules before its registration by providing a<code>VueStorefrontModuleConfig</code> object <strong>with the same key</strong> to <code>extendModule()</code> function. This config will be deep merged with module with the same key which means:</p> <ul><li>All Vuex stores with the same keys will be merged (conflicting actions/mutations will be overwritten, other will be added)</li> <li>Leafs like before/after hooks, store plugins or router object properties will be overwritten by the new ones if provided.</li></ul> <p>Let's see an example and assume we want to extend module <code>cart</code> by overriding it's <code>beforeRegistration</code> hook and <code>load</code> Vuex action.</p> <ol><li>First we need to prepare a <code>VueStorefrontModuleConfig</code> that we will use to extend <code>cart</code> module. It must have same <code>key</code> value as module we want to extend.</li> <li>Next we need to pass this object to <code>extendModule</code> function</li> <li>That's all! Now when you will register <code>cart</code> module it will be extended with provided config.</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Cart <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue-storefront/core/modules/cart'</span>

<span class="token comment">// 1. Preparation of new VSMConfig</span>
<span class="token keyword">const</span> extendCartVuex <span class="token operator">=</span> <span class="token punctuation">{</span>
 actions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
   <span class="token function">load</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'hey'</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">extendCartAfterRegistration</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token constant">VSF</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'Hello, im extended now!'</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>

<span class="token keyword">const</span> cartExtend <span class="token operator">=</span> <span class="token punctuation">{</span>
 key<span class="token punctuation">:</span> <span class="token string">'cart'</span><span class="token punctuation">,</span>
 afterRegistration<span class="token punctuation">:</span> extendCartAfterRegistration<span class="token punctuation">,</span>
 store<span class="token punctuation">:</span> <span class="token punctuation">{</span> modules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> key<span class="token punctuation">:</span> <span class="token string">'cart'</span><span class="token punctuation">,</span> module<span class="token punctuation">:</span> extendCartVuex <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2. After passing the object to extendmodule function it will be merged with Cart module during registration</span>
<span class="token function">extendModule</span><span class="token punctuation">(</span>cartExtend<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> registerModules<span class="token punctuation">:</span> VueStorefrontModule<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>Cart<span class="token punctuation">]</span>
</code></pre></div><p>If you want to make complex changes with your own app-specific VS module (which is not an npm package) it's a good practice to keep this module inside <code>src/modules/{module-name}</code>. To extend module with another module just pass it's config to <code>extendModule</code> function</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Cart <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue-storefront/core/modules/cart'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ExtendCartModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'extend-cart'</span><span class="token punctuation">;</span>


<span class="token function">extendModule</span><span class="token punctuation">(</span>ExtendCartModule<span class="token punctuation">.</span>config<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> registerModules<span class="token punctuation">:</span> VueStorefrontModule<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>Cart<span class="token punctuation">]</span>
</code></pre></div><h2 id="creating-third-party-modules"><a href="#creating-third-party-modules" aria-hidden="true" class="header-anchor">#</a> Creating third party modules</h2> <p>If you want to create third party module just copy the <code>src/modules/module-template</code> raw code to your repo. Don't use any transpilation and build tools since it prevents proper tree shaking and optimization. Building handled by Vue Storefront build tools. Package name needst to start with <code>vsf-</code> prefix to be included into Vue Storefront build process</p> <h2 id="contributions"><a href="#contributions" aria-hidden="true" class="header-anchor">#</a> Contributions</h2> <p>Please introduce every new feature as a standalone, encapsulated module. We also need your help in rewriting Vue Storefront to modular approach - <a href="https://github.com/DivanteLtd/vue-storefront/issues?q=is%3Aissue+is%3Aopen+label%3A%22API+Module%22" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> you can find tasks related to this architectural change and <a href="https://github.com/DivanteLtd/vue-storefront/blob/master/doc/api-modules/refactoring-to-modules.md" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is the tutorial how to approach applying this changes.</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/DivanteLtd/vue-storefront/edit/master/docs/guide/modules/introduction.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/guide/vuex/attribute-store.html" class="prev">
          Attribute Vuex Store
        </a></span> <span class="next"><a href="/guide/modules/cart.html">
          Cart module
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/60.4a3fb3d3.js" defer></script><script src="/assets/js/app.d8ba6bec.js" defer></script>
  </body>
</html>
