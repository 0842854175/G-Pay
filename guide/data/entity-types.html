<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Data Entity Types | Vue Storefront</title>
    <meta name="description" content="Headless PWA for eCommerce">
    <link rel="icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.ca5bf9f5.css" as="style"><link rel="preload" href="/assets/js/app.d8ba6bec.js" as="script"><link rel="preload" href="/assets/js/43.714cb975.js" as="script"><link rel="prefetch" href="/assets/js/10.aad38706.js"><link rel="prefetch" href="/assets/js/11.dbf0cd2d.js"><link rel="prefetch" href="/assets/js/12.8ab12175.js"><link rel="prefetch" href="/assets/js/13.7cddb3f7.js"><link rel="prefetch" href="/assets/js/14.1eec77ed.js"><link rel="prefetch" href="/assets/js/15.79b481f7.js"><link rel="prefetch" href="/assets/js/16.d5958d47.js"><link rel="prefetch" href="/assets/js/17.dad6938c.js"><link rel="prefetch" href="/assets/js/18.16b574f2.js"><link rel="prefetch" href="/assets/js/19.98bf533f.js"><link rel="prefetch" href="/assets/js/2.e420855b.js"><link rel="prefetch" href="/assets/js/20.3befc43a.js"><link rel="prefetch" href="/assets/js/21.5f76b73a.js"><link rel="prefetch" href="/assets/js/22.6ba6e9de.js"><link rel="prefetch" href="/assets/js/23.36cd1220.js"><link rel="prefetch" href="/assets/js/24.bb44e3f8.js"><link rel="prefetch" href="/assets/js/25.ed5e1c93.js"><link rel="prefetch" href="/assets/js/26.c6ce7dd6.js"><link rel="prefetch" href="/assets/js/27.b96d4e19.js"><link rel="prefetch" href="/assets/js/28.1069fe0a.js"><link rel="prefetch" href="/assets/js/29.8c6ca725.js"><link rel="prefetch" href="/assets/js/3.2995eee1.js"><link rel="prefetch" href="/assets/js/30.66e5e0e6.js"><link rel="prefetch" href="/assets/js/31.a5ed2179.js"><link rel="prefetch" href="/assets/js/32.80eacb41.js"><link rel="prefetch" href="/assets/js/33.096aa449.js"><link rel="prefetch" href="/assets/js/34.deb2389a.js"><link rel="prefetch" href="/assets/js/35.5224db0c.js"><link rel="prefetch" href="/assets/js/36.6777a517.js"><link rel="prefetch" href="/assets/js/37.cceecf56.js"><link rel="prefetch" href="/assets/js/38.727d4ca1.js"><link rel="prefetch" href="/assets/js/39.06021a50.js"><link rel="prefetch" href="/assets/js/4.56d2cd4c.js"><link rel="prefetch" href="/assets/js/40.a6db0c7d.js"><link rel="prefetch" href="/assets/js/41.1e93c319.js"><link rel="prefetch" href="/assets/js/42.d7408646.js"><link rel="prefetch" href="/assets/js/44.38aad24b.js"><link rel="prefetch" href="/assets/js/45.2aa6fae9.js"><link rel="prefetch" href="/assets/js/46.ae82a2b4.js"><link rel="prefetch" href="/assets/js/47.4320ee7b.js"><link rel="prefetch" href="/assets/js/48.1f5cc9bd.js"><link rel="prefetch" href="/assets/js/49.d9d92b0f.js"><link rel="prefetch" href="/assets/js/5.468e6e0c.js"><link rel="prefetch" href="/assets/js/50.590c72f3.js"><link rel="prefetch" href="/assets/js/51.84d23438.js"><link rel="prefetch" href="/assets/js/52.46d9a3ae.js"><link rel="prefetch" href="/assets/js/53.2decf3d6.js"><link rel="prefetch" href="/assets/js/54.d6cbd4a4.js"><link rel="prefetch" href="/assets/js/55.3c6ece4b.js"><link rel="prefetch" href="/assets/js/56.74ddfd82.js"><link rel="prefetch" href="/assets/js/57.1401c4b7.js"><link rel="prefetch" href="/assets/js/58.c9baf31f.js"><link rel="prefetch" href="/assets/js/59.aa39857f.js"><link rel="prefetch" href="/assets/js/6.9e714a77.js"><link rel="prefetch" href="/assets/js/60.4a3fb3d3.js"><link rel="prefetch" href="/assets/js/61.78de2281.js"><link rel="prefetch" href="/assets/js/62.abade39a.js"><link rel="prefetch" href="/assets/js/63.3f0ec155.js"><link rel="prefetch" href="/assets/js/64.e9046dd4.js"><link rel="prefetch" href="/assets/js/65.439a44e2.js"><link rel="prefetch" href="/assets/js/66.b8c911b7.js"><link rel="prefetch" href="/assets/js/67.c8004826.js"><link rel="prefetch" href="/assets/js/68.692e58e3.js"><link rel="prefetch" href="/assets/js/69.49751176.js"><link rel="prefetch" href="/assets/js/7.f63a084c.js"><link rel="prefetch" href="/assets/js/70.405beee7.js"><link rel="prefetch" href="/assets/js/8.29152829.js"><link rel="prefetch" href="/assets/js/9.af22b943.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ca5bf9f5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Vue Storefront</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.youtube.com/channel/UCkm1F3Cglty3CE1QwKQUhhg" target="_blank" rel="noopener noreferrer" class="nav-link external">
  YouTube
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://medium.com/the-vue-storefront-journal" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Medium
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/DivanteLtd/vue-storefront" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://www.youtube.com/channel/UCkm1F3Cglty3CE1QwKQUhhg" target="_blank" rel="noopener noreferrer" class="nav-link external">
  YouTube
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://medium.com/the-vue-storefront-journal" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Medium
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/DivanteLtd/vue-storefront" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/guide/" class="sidebar-link">Introduction to Vue Storefront</a></li><li><a href="/guide/upgrade-notes/" class="sidebar-link">Upgrade notes</a></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Installation</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/installation/linux-mac.html" class="sidebar-link">Installing on Linux/MacOS</a></li><li><a href="/guide/installation/windows.html" class="sidebar-link">Installing on Windows</a></li><li><a href="/guide/installation/magento.html" class="sidebar-link">Integration with Magento 2</a></li><li><a href="/guide/installation/production-setup.html" class="sidebar-link">Production setup</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Basics</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/basics/release-cycle.html" class="sidebar-link">Release Cycle</a></li><li><a href="/guide/basics/project-structure.html" class="sidebar-link">Project structure</a></li><li><a href="/guide/basics/configuration.html" class="sidebar-link">Configuration file explained</a></li><li><a href="/guide/basics/contributing.html" class="sidebar-link">How to Contribute</a></li><li><a href="/guide/basics/feature-list.html" class="sidebar-link">Feature list</a></li><li><a href="/guide/basics/recipes.html" class="sidebar-link">FAQ and Recipes</a></li><li><a href="/guide/basics/typescript.html" class="sidebar-link">TypeScript Action Plan</a></li><li><a href="/guide/basics/graphql.html" class="sidebar-link">GraphQL Action Plan</a></li><li><a href="/guide/basics/ssr-cache.html" class="sidebar-link">SSR Cache</a></li><li><a href="/guide/basics/amp.html" class="sidebar-link">Google Accelerated Mobile Pages</a></li><li><a href="/guide/basics/e2e.html" class="sidebar-link">E2E tests</a></li><li><a href="/guide/basics/url.html" class="sidebar-link">Custom URL structure</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Core and themes</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/core-themes/themes.html" class="sidebar-link">Themes in Vue Storefront</a></li><li><a href="/guide/core-themes/layouts.html" class="sidebar-link">Layouts and advanced output operations</a></li><li><a href="/guide/core-themes/core-components.html" class="sidebar-link">Working with core components</a></li><li><a href="/guide/core-themes/ui-store.html" class="sidebar-link">Working with UI Store (Interface state)</a></li><li><a href="/guide/core-themes/translations.html" class="sidebar-link">Internationalization (i18n) of Vue Storefront</a></li><li><a href="/guide/core-themes/service-workers.html" class="sidebar-link">Working with Service Workers</a></li><li><a href="/guide/core-themes/webpack.html" class="sidebar-link">Working with Webpack</a></li><li><a href="/guide/core-themes/plugins.html" class="sidebar-link">Working with plugins</a></li><li><a href="/guide/core-themes/stylesheets.html" class="sidebar-link">Working with stylesheets in the 'default' theme</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Components</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/components/home-page.html" class="sidebar-link">Core Home Page</a></li><li><a href="/guide/components/category-page.html" class="sidebar-link">Core Category Page</a></li><li><a href="/guide/components/product.html" class="sidebar-link">Core Product Page</a></li><li><a href="/guide/components/modal.html" class="sidebar-link">Modal component</a></li><li><a href="/guide/components/events-list.html" class="sidebar-link">Events List</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Data in Vue Storefront</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/data/data.html" class="sidebar-link">Working with data</a></li><li><a href="/guide/data/elasticsearch.html" class="sidebar-link">ElasticSearch data formats</a></li><li><a href="/guide/data/data-migrations.html" class="sidebar-link">Data Migrations for ElacticSearch</a></li><li><a href="/guide/data/elastic-queries.html" class="sidebar-link">ElasticSearch Queries</a></li><li><a href="/guide/data/database-tool.html" class="sidebar-link">Database tool</a></li><li><a href="/guide/data/entity-types.html" class="active sidebar-link">Data Entity Types</a></li><li><a href="/guide/data/static-data.html" class="sidebar-link">Static Data support in Vue Storefront</a></li><li><a href="/guide/data/data-loader.html" class="sidebar-link">Async Data Loader</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Extensions</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/extensions/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/guide/extensions/extending-api.html" class="sidebar-link">Extending the API</a></li><li><a href="/guide/extensions/extending-server-side-routes.html" class="sidebar-link">Extending Express.js server side routes</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Working with Vuex</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/vuex/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/guide/vuex/vuex-conventions.html" class="sidebar-link">Vuex conventions</a></li><li><a href="/guide/vuex/product-store.html" class="sidebar-link">Product Vuex Store</a></li><li><a href="/guide/vuex/category-store.html" class="sidebar-link">Category Vuex Store</a></li><li><a href="/guide/vuex/stock-store.html" class="sidebar-link">Stock Vuex Store</a></li><li><a href="/guide/vuex/attribute-store.html" class="sidebar-link">Attribute Vuex Store</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Modules</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/modules/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/guide/modules/cart.html" class="sidebar-link">Cart module</a></li><li><a href="/guide/modules/user.html" class="sidebar-link">User Module</a></li><li><a href="/guide/modules/checkout.html" class="sidebar-link">Checkout Module</a></li><li><a href="/guide/modules/order.html" class="sidebar-link">Order module</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Integrations</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/integrations/integrations.html" class="sidebar-link">Existing integrations</a></li><li><a href="/guide/integrations/reviews.html" class="sidebar-link">Product Reviews</a></li><li><a href="/guide/integrations/payment-gateway.html" class="sidebar-link">Payment Gateway Integration</a></li><li><a href="/guide/integrations/paypal-payments.html" class="sidebar-link">PayPal payments support</a></li><li><a href="/guide/integrations/direct-prices-sync.html" class="sidebar-link">Direct prices sync with Magento</a></li><li><a href="/guide/integrations/tier-prices-sync.html" class="sidebar-link">Tier prices sync with Magento</a></li><li><a href="/guide/integrations/totals-sync.html" class="sidebar-link">Totals and cart sync with Magento</a></li><li><a href="/guide/integrations/multistore.html" class="sidebar-link">Multistore Magento2 support</a></li><li><a href="/guide/integrations/product-reviews.html" class="sidebar-link">Product Reviews</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="data-entity-types"><a href="#data-entity-types" aria-hidden="true" class="header-anchor">#</a> Data Entity Types</h1> <p>Vue-storefront uses multiple data entity types to cover the whole scope of storefront.
Default entity types are</p> <ul><li>Product</li> <li>Category</li> <li>Attribute</li> <li>Taxrule</li></ul> <p>These entity types were hardcoded and there were no ability to easy use another custom entity type required for customization.</p> <p>Now Vue-storefront has a new logic to work with entities in the data fetching prospective: Entity Types.</p> <p>Each search adapter should register an entity type to cover a search feature. Default API and new GraphQL search adapters are updated to register all required existing entity types. But developer can also inject custom entity types to work with some other custom entity type data (eg to get list of offline stores or something else).</p> <p>To use it, an internal GraphQL server should be updated with adding a corresponding resolver for the new entity type. Also, you can use some other external GraphQL server that already have implemented a resolver for this entity type.</p> <p>To register such an entity type, you should use <code>searchAdapter.registerEntityTypeByQuer</code>y` method like shown in the example below:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchAdapterFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> searchAdapter <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getSearchAdapter</span><span class="token punctuation">(</span><span class="token string">'graphql'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
searchAdapter<span class="token punctuation">.</span><span class="token function">registerEntityTypeByQuery</span><span class="token punctuation">(</span><span class="token string">'testentity'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  url<span class="token punctuation">:</span> <span class="token string">'http://localhost:8080/graphql/'</span><span class="token punctuation">,</span>
  query<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./queries/testentity.gql'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  queryProcessor<span class="token punctuation">:</span> query <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// function that can modify the query each time before it's being executed</span>
    <span class="token keyword">return</span> query<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resultPorcessor<span class="token punctuation">:</span> <span class="token punctuation">(</span>resp<span class="token punctuation">,</span> start<span class="token punctuation">,</span> size<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>resp <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Invalid graphQl result - null not exepcted'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>resp<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">processESResponseType</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>data<span class="token punctuation">.</span>testentity<span class="token punctuation">,</span> start<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>resp<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>
          <span class="token string">&quot;Unknown error with graphQl result in resultPorcessor for entity type 'category'&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Sample extension <code>sample-custom-entity-graphql</code> was added to illustrate how it can be used. It injects a custom entity type <code>testentity</code> and set a custom GraphQL server URL (it is the same as a default api host in the example just because a resolver for this <code>testentity</code> was added there for testing. But please notice it was removed there)</p> <p>To test a sample extension with resolver you can add GraphqQL schema file and resolver file in the separate <code>src/graphql/elastcisearch/testentity</code> folder in the Vue Storefront API.</p> <p><code>schema.graphqls</code> file:</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code>type Query <span class="token punctuation">{</span>
  testentity<span class="token punctuation">(</span><span class="token attr-name">filter</span><span class="token punctuation">:</span> TestInput<span class="token punctuation">)</span><span class="token punctuation">:</span> ESResponse
<span class="token punctuation">}</span>
input TestInput
  <span class="token directive function">@doc</span><span class="token punctuation">(</span>
    <span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token string">&quot;TaxRuleInput specifies the tax rules information to search&quot;</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> FilterTypeInput
    <span class="token directive function">@doc</span><span class="token punctuation">(</span><span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token string">&quot;An ID that uniquely identifies the tax rule&quot;</span><span class="token punctuation">)</span>
  <span class="token attr-name">code</span><span class="token punctuation">:</span> FilterTypeInput
    <span class="token directive function">@doc</span><span class="token punctuation">(</span>
      <span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token string">&quot;The unique identifier for an tax rule. This value should be in lowercase letters without spaces.&quot;</span>
    <span class="token punctuation">)</span>
  <span class="token attr-name">priority</span><span class="token punctuation">:</span> FilterTypeInput <span class="token directive function">@doc</span><span class="token punctuation">(</span><span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token string">&quot;Priority of the tax rule&quot;</span><span class="token punctuation">)</span>
  <span class="token attr-name">position</span><span class="token punctuation">:</span> FilterTypeInput <span class="token directive function">@doc</span><span class="token punctuation">(</span><span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token string">&quot;Position of the tax rule&quot;</span><span class="token punctuation">)</span>
  <span class="token attr-name">customer_tax_class_ids</span><span class="token punctuation">:</span> FilterTypeInput
    <span class="token directive function">@doc</span><span class="token punctuation">(</span><span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token string">&quot;Cunstomer tax class ids of the tax rule&quot;</span><span class="token punctuation">)</span>
  <span class="token attr-name">product_tax_class_ids</span><span class="token punctuation">:</span> FilterTypeInput
    <span class="token directive function">@doc</span><span class="token punctuation">(</span><span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token string">&quot;Products tax class ids of the tax rule&quot;</span><span class="token punctuation">)</span>
  <span class="token attr-name">tax_rate_ids</span><span class="token punctuation">:</span> FilterTypeInput
    <span class="token directive function">@doc</span><span class="token punctuation">(</span><span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token string">&quot;Tax rates ids of the tax rule&quot;</span><span class="token punctuation">)</span>
  <span class="token attr-name">calculate_subtotal</span><span class="token punctuation">:</span> FilterTypeInput
    <span class="token directive function">@doc</span><span class="token punctuation">(</span><span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token string">&quot;Calculating subtotals of the tax rule&quot;</span><span class="token punctuation">)</span>
  <span class="token attr-name">rates</span><span class="token punctuation">:</span> FilterTypeInput <span class="token directive function">@doc</span><span class="token punctuation">(</span><span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token string">&quot;Rates of the tax rule&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Resolver file <code>resolver.js</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> config <span class="token keyword">from</span> <span class="token string">'config'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> client <span class="token keyword">from</span> <span class="token string">'../client'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> buildQuery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../queryBuilder'</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">testentity</span><span class="token punctuation">(</span>filter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> query <span class="token operator">=</span> <span class="token function">buildQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span> filter<span class="token punctuation">,</span> pageSize<span class="token punctuation">:</span> <span class="token number">150</span><span class="token punctuation">,</span> type<span class="token punctuation">:</span> <span class="token string">'taxrule'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    index<span class="token punctuation">:</span> config<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>indices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    type<span class="token punctuation">:</span> config<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>indexTypes<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    body<span class="token punctuation">:</span> query<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> response<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> resolver <span class="token operator">=</span> <span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    testentity<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> <span class="token punctuation">{</span> filter <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">testentity</span><span class="token punctuation">(</span>filter<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> resolver<span class="token punctuation">;</span>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/DivanteLtd/vue-storefront/edit/master/docs/guide/data/entity-types.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/guide/data/database-tool.html" class="prev">
          Database tool
        </a></span> <span class="next"><a href="/guide/data/static-data.html">
          Static Data support in Vue Storefront
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/43.714cb975.js" defer></script><script src="/assets/js/app.d8ba6bec.js" defer></script>
  </body>
</html>
