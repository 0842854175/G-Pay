(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{186:function(t,e,s){"use strict";s.r(e);var n=s(0),a=Object(n.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[t._v("If you like to start developing sites using Vue Storefront, probably you need to start with the "),s("router-link",{attrs:{to:"./linux-mac.html"}},[t._v("Installation guide")]),t._v(". For the development purposes you'll probably be using "),s("code",[t._v("yarn install")]),t._v(" / "),s("code",[t._v("npm run installer")]),t._v(" sequence which will setup Vue Storefront locally using the automated installer and prepared Docker images for having Elastic Search and Redis support.")],1),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),s("p",[t._v("Assumptions for the rest of this tutorial:")]),t._v(" "),s("ul",[s("li",[t._v("You're having root access to Debian Linux machine;")]),t._v(" "),s("li",[t._v("We'll be using the default local ports "),s("code",[t._v("3000")]),t._v(" for "),s("a",{attrs:{href:"https://github.com/DivanteLtd/vue-storefront",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("vue-storefront")]),s("OutboundLink")],1),t._v(" and "),s("code",[t._v("8080")]),t._v(" for "),s("a",{attrs:{href:"https://github.com/DivanteLtd/vue-storefront-api",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("vue-storefront-api")]),s("OutboundLink")],1),t._v("; the ports "),s("strong",[t._v("should not be exposed")]),t._v(" as they will be hidden behind "),s("strong",[t._v("NGINX proxy")]),t._v(";")]),t._v(" "),t._m(4),t._v(" "),t._m(5)]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),s("p",[t._v("For the purposes of this tutorial we will use default packages distributed along with the Debian operating systems, without any security hardening, config hardening operations.")]),t._v(" "),t._m(10),t._v(" "),s("p",[t._v("First, let's create the user (as root user):")]),t._v(" "),t._m(11),s("p",[t._v("Then install the Elasticsearch and Redis (as root user):")]),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),t._v(" "),s("p",[t._v("This is a general rule of setting up a production node.js app which gives you a lot of flexibility regarding the SSL, gzip compression, URL routing and other techniques to be configured without additional hassle. You can use any other proxy server for this purpose - such as Varnish or Apache2 + mod_proxy.")]),t._v(" "),s("p",[t._v("Some additional materials:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.digitalocean.com/community/tutorials/how-to-set-up-a-node-js-application-for-production-on-ubuntu-16-04",target:"_blank",rel:"noopener noreferrer"}},[t._v("How to setup production node.js app in the Digital Ocean environment (Ubuntu 16)"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/",target:"_blank",rel:"noopener noreferrer"}},[t._v("How to setup nginx reverse proxy"),s("OutboundLink")],1)])]),t._v(" "),t._m(15),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/DivanteLtd/vue-storefront/tree/master/docs/guide/installation/etc/nginx/sites-enabled/prod.vuestorefront.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("Here is the complete "),s("code",[t._v("/etc/nginx/sites-enabled/prod.vuestorefront.io")]),t._v(" file"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Create NGINX config file from the template (please run as a root user):")]),t._v(" "),t._m(16),t._m(17),t._v(" "),t._m(18),s("p",[t._v("Now you can run the NGINX:")]),t._v(" "),t._m(19),s("p",[t._v("Please find the full comments on the following sections of the file below:")]),t._v(" "),t._m(20),s("p",[t._v("This section runs the standard http://prod.vuestorefront.io and creates a wildcard redirect from http://prod.vuestorefront.io/* -> https://prod.vuestorefront.io/. SSL secured connection is a must for run PWA and use service-workers.")]),t._v(" "),t._m(21),t._m(22),t._v(" "),t._m(23),t._m(24),t._v(" "),t._m(25),s("p",[t._v("Here we go with the SSL settings - based on our best experiences from the past. Please read details in the "),s("a",{attrs:{href:"http://nginx.org/en/docs/http/configuring_https_servers.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("NGINX documentation"),s("OutboundLink")],1),t._v(" if you like ðŸ˜‰")]),t._v(" "),t._m(26),s("p",[t._v("Vue Storefront SSR responses contain the full markup + JSON objects included for speed-up the first page view. Unfortunately - among with significant JS bundle sizes - it can generate a significant network load. We're optimizing it with using gzip compression server side.")]),t._v(" "),t._m(27),s("p",[t._v("We're using "),s("a",{attrs:{href:"http://nginx.org/en/docs/http/ngx_http_proxy_module.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("proxy_pass")]),s("OutboundLink")],1),t._v(" from the "),s("code",[t._v("ngx_http_proxy_module")]),t._v(" to pull the content from the Vue Storefront nodejs server. Site will be available under https://prod.vuestorefront.io/")]),t._v(" "),t._m(28),s("p",[t._v("The same module is used for providing user with the static assets. Assets will be available under: https://prod.vuestorefront.io/assets")]),t._v(" "),t._m(29),s("p",[t._v("The next proxy section is used for serving the API. It's a proxy to "),s("a",{attrs:{href:"https://github.com/DivanteLtd/vue-storefront-api",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("vue-storefront-api")]),s("OutboundLink")],1),t._v(" app running on "),s("code",[t._v("8080")]),t._v(" port (default config). API will be available under: https://prod.vuestorefront.io/api")]),t._v(" "),t._m(30),s("p",[t._v("The last proxy is used for serving product images. It's a proxy to "),s("a",{attrs:{href:"https://github.com/DivanteLtd/vue-storefront-api",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("vue-storefront-api")]),s("OutboundLink")],1),t._v(" app running on "),s("code",[t._v("8080")]),t._v(" port (default config). Images will be available under: https://prod.vuestorefront.io/img")]),t._v(" "),t._m(31),t._v(" "),s("p",[t._v("In case you are already using the apache2 web-server in your environment as well and can't (or don't want) to use NGINX, you can also set up apache2 as an reverse proxy instead of nginx. This is done by adding this block to your apache2 virtual host.")]),t._v(" "),t._m(32),s("p",[t._v("You also need to enable "),s("a",{attrs:{href:"https://httpd.apache.org/docs/current/mod/mod_proxy.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("mod_proxy"),s("OutboundLink")],1),t._v(" for this.")]),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),s("p",[t._v("Then you will need to install the required node packages:")]),t._v(" "),t._m(38),s("p",[t._v("... and ...")]),t._v(" "),t._m(39),s("p",[t._v("It may take a few minutes. Once the modules are installed we can set configuration files for both services.")]),t._v(" "),t._m(40),t._v(" "),s("p",[t._v("The full configuration files are available here to download: "),s("a",{attrs:{href:"https://github.com/DivanteLtd/vue-storefront/blob/develop/docs/guide/installation/vue-storefront/config",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-storefront"),s("OutboundLink")],1),t._v(" and "),s("a",{attrs:{href:"https://github.com/DivanteLtd/vue-storefront/blob/develop/docs/guide/installation/vue-storefront-api/config",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-storefront-api"),s("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(41),t._v(" "),t._m(42),s("p",[t._v("... and ...")]),t._v(" "),t._m(43),t._m(44),t._v(" "),t._m(45),t._m(46),t._v(" "),t._m(47),t._m(48),t._v(" "),t._m(49),t._v(" "),s("p",[t._v("The "),s("a",{attrs:{href:"https://github.com/DivanteLtd/vue-storefront/blob/develop/docs/guide/installation/vue-storefront-api/config",target:"_blank",rel:"noopener noreferrer"}},[t._v("provided vue-storefront-api configuration"),s("OutboundLink")],1),t._v(" requires almost no changes.")]),t._v(" "),s("p",[t._v("The only lines you need to alter are:")]),t._v(" "),t._m(50),t._m(51),t._v(" "),t._m(52),t._v(" "),t._m(53),t._v(" "),t._m(54),t._v(" "),t._m(55),t._v(" "),s("p",[t._v("Before we can run Vue Storefront and Vue Storefront API we should build it in the production mode. To do so please just execute the following commands:")]),t._v(" "),t._m(56),t._m(57),t._m(58),t._v(" "),s("p",[t._v("Vue Storefront needs to have some data in the ElasticSearch to properly display products and categories. Of course you can install "),s("a",{attrs:{href:"https://github.com/DivanteLtd/mage2vuestorefront",target:"_blank",rel:"noopener noreferrer"}},[t._v("mage2vuestorefront"),s("OutboundLink")],1),t._v(" and configure the data pump to synchronize and update the ElasticSearch index whenever data is being changed in Magento. For purposes of this tutorial we'll just restore the data from the JSON file.")]),t._v(" "),s("p",[t._v("You can easily dump your current VS index using the following command (your local installation):")]),t._v(" "),t._m(59),t._m(60),t._v(" "),t._m(61),t._m(62),t._v(" "),t._m(63),t._m(64),t._v(" "),t._m(65),t._v(" "),t._m(66),s("p",[t._v("Both applications use "),s("a",{attrs:{href:"https://pm2.io/runtime",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("PM2")]),t._v(" process manager"),s("OutboundLink")],1),t._v(" in the production mode ("),s("code",[t._v("start")]),t._v(" commands) to manage and respawn the nodejs processes when needed.")]),t._v(" "),t._m(67),t._v(" "),s("p",[t._v("To be prepared.")])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"production-setup"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#production-setup","aria-hidden":"true"}},[this._v("#")]),this._v(" Production setup")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Development mode means you're using node.js based server as HTTP service and running the app on the "),e("code",[this._v("3000")]),this._v(" TCP port. As it's great for local testing it's "),e("strong",[this._v("not recommended")]),this._v(" to use installer and direct user access to node.js in production configurations.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"production-setup-bare-vps"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#production-setup-bare-vps","aria-hidden":"true"}},[this._v("#")]),this._v(" Production setup - bare VPS")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("To run Vue Storefront in the production mode without Docker/Kubernetes you'll need the Virtual Private Server with "),e("code",[this._v("root")]),this._v(" access (for the setup purposes). We assume that you're using "),e("code",[this._v("Debian GNU Linux")]),this._v(" in the following steps.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[this._v("We're using "),e("strong",[this._v("prod.vuestorefront.io")]),this._v(" as a domain name - please replace it with your host URL address;")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[this._v("We assume that you have SSL certificate for "),e("strong",[this._v("prod.vuestorefront.io")]),this._v(" (or your domain of course). SSL encryption is required for PWA + service workers;")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("General Solution Architecture:\n"),e("em",[this._v("USER -> NGINX proxy -> vue-storefront / vue-storefront-api")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("We'll be hiding the "),s("code",[t._v("vue-storefront")]),t._v(" and "),s("code",[t._v("vue-storefront-api")]),t._v(" services behind NGINX proxy. You can use NGINX for caching proxy, but in our case it will be just forwarding the requests without cache (as VS is pretty fast and caching is not required). The key features we're using are: SSL encryption, gzip-encoding, url routing (to merge "),s("code",[t._v("vue-storefront")]),t._v(" and "),s("code",[t._v("vue-storefront-api")]),t._v(" services under one domain).")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"prerequisites"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites","aria-hidden":"true"}},[this._v("#")]),this._v(" Prerequisites")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Vue Storefront requires "),e("strong",[this._v("Elastic Search")]),this._v(" and the "),e("strong",[this._v("Redis server")]),this._v(" installed. By default, in the development mode, both dependencies are provided with the "),e("code",[this._v("docker-compose.yml")]),this._v(" Docker images. However, for the production purposes we recommend to install the servers natively.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Please make sure")]),this._v(" that your security/devops team have taken a look at the configs you're using and do harden the server configuration before launching your app publicly!")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("mkdir")]),this._v(" /home/www\n"),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("useradd")]),this._v(" -m -d /home/www/vuestorefront vuestorefront\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" update\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -sL https://deb.nodesource.com/setup_8.x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" -\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y nodejs\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g yarn\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" redis-server\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" openjdk-8-jre\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -L -O https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.6.9.deb\ndpkg -i elasticsearch-5.6.9.deb\n/etc/init.d/elasticsearch start\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" imagemagick\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" nginx\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx","aria-hidden":"true"}},[this._v("#")]),this._v(" Nginx")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("We decided to use "),e("strong",[this._v("NGINX")]),this._v(" as a HTTP proxy - exposed in front of the users, handling the network traffic and dealing with the "),e("code",[this._v("vue-storefront")]),this._v(" and the "),e("code",[this._v("vue-storefront-api")]),this._v(" apps as a backend.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"nginx-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Nginx configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("curl")]),this._v(" https://raw.githubusercontent.com/DivanteLtd/vue-storefront/develop/docs/guide/installation/prod.vuestorefront.io "),e("span",{pre:!0,attrs:{class:"token operator"}},[this._v(">")]),this._v(" /etc/nginx/sites-available/prod.vuestorefront.io\n"),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("ln")]),this._v(" -s /etc/nginx/sites-available/prod.vuestorefront.io /etc/nginx/sites-enabled/prod.vuestorefront.io\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Install the SSL certificate")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /etc/nginx/ssl\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nano")]),t._v(" /etc/nginx/ssl/prod.vuestorefront.io.chained.crt\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nano")]),t._v(" /etc/nginx/ssl/prod.vuestorefront.io.key\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nano")]),t._v(" /etc/nginx/ssl/dhparam.pem\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("/etc/init.d/nginx restart\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tlisten "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tserver_name prod"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vuestorefront"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("301")]),t._v(" https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("prod"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vuestorefront"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io$request_uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tlisten "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v(" ssl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tserver_name prod"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vuestorefront"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io http2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\tssl on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("We're using "),e("code",[this._v("http2")]),this._v(" but it's not required. This section is for setting up the SSL secured virtual host of Vue Storefront frontend.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("ssl_certificate /etc/nginx/ssl/prod.vuestorefront.io.chained.crt;\nssl_certificate_key /etc/nginx/ssl/prod.vuestorefront.io.key;\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("We assume that the certificate related files are stored in the "),e("code",[this._v("/etc/nginx/ssl/")]),this._v(". Please point it to your certificate files.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;\nssl_prefer_server_ciphers on;\nssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:DHE-RSA-AES256-SHA;\nssl_ecdh_curve secp384r1;\nssl_session_timeout 10m;\nssl_session_cache shared:SSL:10m;\nssl_session_tickets off;\nssl_stapling on;\nssl_stapling_verify on;\nresolver 8.8.8.8 8.8.4.4 valid=300s;\nresolver_timeout 5s;\n\nssl_dhparam /etc/nginx/ssl/dhparam.pem;\n\nadd_header Strict-Transport-Security "max-age=31536000" always;\nadd_header X-Frame-Options DENY;\nadd_header X-Content-Type-Options nosniff;\nadd_header X-XSS-Protection "1; mode=block";\nadd_header X-Robots-Tag none;\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("gzip on;\ngzip_proxied any;\ngzip_types\n  text/css\n  text/javascript\n  text/xml\n  application/javascript\n  application/json\n  text/json\n  text/html;\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("location / {\n  proxy_pass http://localhost:3000/;\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("location /assets/ {\n  proxy_pass http://localhost:3000/assets/;\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("location /api/ {\n  proxy_pass http://localhost:8080/api/;\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("location /img/ {\n  proxy_pass http://localhost:8080/img/;\n}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"apache2-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#apache2-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Apache2 configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("ProxyRequests off\n\nProxyPass /api/ http://localhost:8080/api/\nProxyPassReverse /api http://localhost:8080/api/\n\nProxyPass /img/ http://localhost:8080/img/\nProxyPassReverse /img http://localhost:8080/img/\n\nProxyPass /assets/ http://localhost:3000/assets/\nProxyPassReverse /assets http://localhost:3000/assets/\n\nProxyPass / http://localhost:3000/\nProxyPassReverse / http://localhost:3000/\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"vue-storefront-and-vue-storefront-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue-storefront-and-vue-storefront-api","aria-hidden":"true"}},[this._v("#")]),this._v(" Vue Storefront and Vue Storefront API")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("After you have the NGINX set up, you should get a "),s("code",[t._v("502 error")]),t._v(" when accessing the https://prod.vuestorefront.io. This is totally fine! We've just missed the most important step which is running backend services that will power up our installation. Now nginx is trying to connect to "),s("code",[t._v("localhost:3000")]),t._v(" for "),s("code",[t._v("vue-storefront")]),t._v(" and "),s("code",[t._v("localhost:8080")]),t._v(" for "),s("code",[t._v("vue-storefront-api")]),t._v(" without any success.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("We create a Linux user called "),e("code",[this._v("vuestorefront")]),this._v(" and go to "),e("code",[this._v("/home/www/vuestorefront")]),this._v(" which is our home directory.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You need to clone the "),e("code",[this._v("vue-storefront")]),this._v(" and the "),e("code",[this._v("vue-storefront-api")]),this._v(" repos accordingly with the following commands:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" vuestorefront\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cd")]),t._v(" /home/www/vuestorefront\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/DivanteLtd/vue-storefront.git\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/DivanteLtd/vue-storefront-api.git\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("cd")]),this._v(" /home/www/vuestorefront/vue-storefront-api\nyarn "),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("install")]),this._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("cd")]),this._v(" /home/www/vuestorefront/vue-storefront\nyarn "),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("install")]),this._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"vue-storefront-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue-storefront-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Vue Storefront configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Please create the "),e("code",[this._v("vue-storefront-api/config/local.json")]),this._v(" and "),e("code",[this._v("vue-storefront/config/local.json")]),this._v(" files accordingly.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("curl")]),this._v(" https://raw.githubusercontent.com/DivanteLtd/vue-storefront/develop/docs/guide/installation/vue-storefront-api/config/local.json "),e("span",{pre:!0,attrs:{class:"token operator"}},[this._v(">")]),this._v(" /home/www/vuestorefront/vue-storefront-api/config/local.json\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("curl")]),this._v(" https://raw.githubusercontent.com/DivanteLtd/vue-storefront/develop/docs/guide/installation/vue-storefront/config/local.json "),e("span",{pre:!0,attrs:{class:"token operator"}},[this._v(">")]),this._v(" /home/www/vuestorefront/vue-storefront/config/local.json\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Please find the key sections of the "),e("code",[this._v("vue-storefront/config/local.json")]),this._v(" file described in below:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"elasticsearch"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"httpAuth"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"host"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://prod.vuestorefront.io/api/catalog"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"index"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue_storefront_catalog"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"storeViews"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mapStoreUrlsFor"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"de"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"it"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"multistore"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"de"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"disabled"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"elasticsearch"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"httpAuth"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"host"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://prod.vuestorefront.io/api/catalog"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"index"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue_storefront_catalog_de"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"it"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"disabled"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"elasticsearch"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"httpAuth"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"host"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://prod.vuestorefront.io/api/catalog"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"index"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue_storefront_catalog_it"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("We're setting up the product's endpoint to https://prod.vuestorefront.io/api/catalog (please use your domain accordingly of course). As you may notice, the "),e("code",[this._v("/api")]),this._v(" url is proxied by the NGINX to "),e("code",[this._v("localhost:8080")]),this._v(" - our "),e("code",[this._v("vue-storefront-api")]),this._v(" instance.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cart"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"synchronize"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"synchronize_totals"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"create_endpoint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://prod.vuestorefront.io/api/cart/create?token={{token}}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"updateitem_endpoint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://prod.vuestorefront.io/api/cart/update?token={{token}}&cartId={{cartId}}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"deleteitem_endpoint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://prod.vuestorefront.io/api/cart/delete?token={{token}}&cartId={{cartId}}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pull_endpoint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://prod.vuestorefront.io/api/cart/pull?token={{token}}&cartId={{cartId}}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"totals_endpoint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://prod.vuestorefront.io/api/cart/totals?token={{token}}&cartId={{cartId}}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"paymentmethods_endpoint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://prod.vuestorefront.io/api/cart/payment-methods?token={{token}}&cartId={{cartId}}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"shippingmethods_endpoint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://prod.vuestorefront.io/api/cart/shipping-methods?token={{token}}&cartId={{cartId}}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"shippinginfo_endpoint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://prod.vuestorefront.io/api/cart/shipping-information?token={{token}}&cartId={{cartId}}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"collecttotals_endpoint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://prod.vuestorefront.io/api/cart/collect-totals?token={{token}}&cartId={{cartId}}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"deletecoupon_endpoint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://prod.vuestorefront.io/api/cart/delete-coupon?token={{token}}&cartId={{cartId}}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"applycoupon_endpoint"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://prod.vuestorefront.io/api/cart/apply-coupon?token={{token}}&cartId={{cartId}}&coupon={{coupon}}"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("There are 27 more instances of "),e("code",[this._v("prod.vuestorefront.io")]),this._v(" to be replaced with your production URL address in this file - please just do so ðŸ˜ƒ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"vue-storefront-api-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue-storefront-api-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Vue Storefront API configuration")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"imageable"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"namespace"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"maxListeners"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("512")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"imageSizeLimit"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"timeouts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"convert"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"identify"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"download"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"whitelist"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"allowedHosts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('".*divante.pl"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('".*vuestorefront.io"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"trustedHosts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('".*divante.pl"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('".*vuestorefront.io"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"keepDownloads"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"maxDownloadCacheSize"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tmpPathRoot"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/tmp"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"elasticsearch"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"host"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"port"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"9200"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"indices"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue_storefront_catalog"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue_storefront_catalog_it"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue_storefront_catalog_de"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("You should put here the "),s("code",[t._v("allowedHosts")]),t._v(" and "),s("code",[t._v("trustedHosts")]),t._v(" for the Imageable - to download the product images. The domain name points to the "),s("strong",[t._v("Magento2")]),t._v(" instance where images are sourced. In this example Magento2 is running under "),s("strong",[t._v("http://demo-magento2.vuestorefront.io")]),t._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"using-your-own-magento2-instance"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#using-your-own-magento2-instance","aria-hidden":"true"}},[this._v("#")]),this._v(" Using your own magento2 instance")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("In this case you'll have to update "),e("code",[this._v("magento2")]),this._v(" config node with correct hostname in vue-storefront-api config file. To get all necessary Magento2 API data for "),e("code",[this._v("api")]),this._v(" node, navigate to SYSTEM -> Extensions -> Integrations in Magento2 Admin.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("click Add new integration")]),t._v(" "),s("li",[t._v("check the necessary permissions (check Catalog, Sales, My Account and Carts on API permissions tabâ€Š)")]),t._v(" "),s("li",[t._v("click Activate")]),t._v(" "),s("li",[t._v("copy necessary keys, secrets and tokens into "),s("code",[t._v("api")]),t._v(" section of vue-storefront-api config")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"build-vs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#build-vs","aria-hidden":"true"}},[this._v("#")]),this._v(" Build VS")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("cd")]),this._v(" /home/www/vuestorefront/vue-storefront/\nyarn build\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("cd")]),this._v(" /home/www/vuestorefront/vue-storefront-api/\nyarn build\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"data-import"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#data-import","aria-hidden":"true"}},[this._v("#")]),this._v(" Data import")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("cd")]),this._v(" vue-storefront-api\n"),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("rm")]),this._v(" var/catalog.json\n"),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("npm")]),this._v(" run dump\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Now in the "),e("code",[this._v("var/catalog.json")]),this._v(" you have your current database dump. Please transfer this file to the server for example using the following ssh command:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("ssh")]),this._v(" vuestorefront@prod.vuestorefront.io "),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("rm")]),this._v(" ~/vue-storefront-api/var/catalog.json\n"),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("scp")]),this._v(" vue-storefront-api/var/catalog.json vuestorefront@prod.vuestorefront.io:~/vue-storefront-api/var/catalog.json\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Then, after logging in to your "),e("code",[this._v("prod.vuestorefront.io")]),this._v(" server as a "),e("code",[this._v("vuestorefront")]),this._v(" you can run the following command to import the data:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cd")]),t._v(" vue-storefront-api\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run db new\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run restore2main\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run db rebuild\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"running-the-vue-storefront-and-vue-storefront-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#running-the-vue-storefront-and-vue-storefront-api","aria-hidden":"true"}},[this._v("#")]),this._v(" Running the Vue Storefront and Vue Storefront API")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("After everything set, you can just start the "),e("code",[this._v("vue-storefront")]),this._v(" and "),e("code",[this._v("vue-storefront-api")]),this._v(":")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("cd")]),this._v(" vue-storefront-api\nyarn start\n"),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("cd")]),this._v(" vue-storefront\nyarn start\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"production-setup-using-docker-kubernetes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#production-setup-using-docker-kubernetes","aria-hidden":"true"}},[this._v("#")]),this._v(" Production setup - using Docker / Kubernetes")])}],!1,null,null,null);a.options.__file="production-setup.md";e.default=a.exports}}]);